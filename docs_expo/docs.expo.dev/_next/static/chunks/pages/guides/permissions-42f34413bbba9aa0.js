(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68446],{8340:(e,s,n)=>{"use strict";n.d(s,{B:()=>o});var i=n(37876),r=n(14232),t=n(47681);let o=e=>{let{children:s,abstract:n,title:o}=e;return n?o??="Working in an existing React Native app?":o??="Are you using this library in an existing React Native app?",(0,r.useEffect)(()=>{if("string"==typeof s)throw Error(`Content inside 'ConfigReactNative' needs to be surrounded by new lines to be parsed as markdown.

Make sure there is a blank new line before and after this content: '${s}'`)},[s]),(0,i.jsx)(t.N,{summary:o,children:s})}},34323:(e,s,n)=>{"use strict";Object.defineProperty(s,Symbol.toStringTag,{value:"Module"});let i=n(14232),r=n(71894),t=function(e){let s=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(let n in e)if("default"!==n){let i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:()=>e[n]})}}return s.default=e,Object.freeze(s)}(i);function o({className:e,...s}){let n=r.mergeClasses("icon-md text-icon-default translate-z shrink-0",e);return t.createElement("svg",{fill:"none",viewBox:"0 0 24 24",className:n,role:"img",...s},t.createElement("g",{id:"triangle-down-custom-icon"},t.createElement("path",{id:"Vector 250",fill:"currentColor",d:"M18.8831 9.43005H5.11694L12 16.3131L18.8831 9.43005Z"})))}o.displayName="TriangleDownIcon",s.TriangleDownIcon=o},46780:(e,s,n)=>{"use strict";n.a(e,async(e,i)=>{try{n.d(s,{BE:()=>r.B,Y_:()=>t.Y,rB:()=>o.r});var r=n(8340),t=n(96665),o=n(57646),a=e([o]);o=(a.then?(await a)():a)[0],i()}catch(e){i(e)}})},47681:(e,s,n)=>{"use strict";n.d(s,{N:()=>p});var i=n(37876),r=n(66028),t=n(34323),o=n(34824),a=n(14232),l=n(45893),d=n(30311),c=n(99937);let p=(0,l.A)(e=>{let{summary:s,testID:n,children:l,className:p,headingManager:h,open:m=!1}=e,u=(0,o.useRouter)(),x=(0,a.useRef)(null),f=(0,a.useRef)(h.addHeading(s,1,void 0));return(0,a.useEffect)(()=>{if(u?.asPath){let e=u.asPath.split("#"),s=e.length>0?e[1]:void 0;s&&s===f.current.slug&&x?.current?.setAttribute("open","")}},[]),(0,i.jsxs)("details",{ref:x,id:f.current.slug,className:(0,r.mergeClasses)("mb-3 scroll-m-4 rounded-md border border-default bg-default p-0","[&[open]]:shadow-xs","[h4+&]:mt-3 [li>&]:mt-3 [p+&]:mt-3",p),open:m,children:[(0,i.jsxs)("summary",{className:(0,r.mergeClasses)("group m-0 grid cursor-pointer grid-cols-[min-content_auto_min-content_1fr] items-center rounded-md bg-subtle p-1.5 pr-3","[details[open]>&]:rounded-b-none","[&_h4]:my-0","[&_code]:mt-px [&_code]:inline [&_code]:bg-element [&_code]:pb-px [&_code]:text-[85%] [&_code]:leading-snug"),children:[(0,i.jsx)("div",{className:"ml-1.5 mr-2 mt-[5px] self-baseline",children:(0,i.jsx)(t.TriangleDownIcon,{className:(0,r.mergeClasses)("icon-sm text-icon-default","-rotate-90 transition-transform duration-200","[details[open]>summary_&]:rotate-0")})}),(0,i.jsx)(c.M9,{className:(0,r.mergeClasses)("relative mr-1 inline scroll-m-5 items-center gap-1.5","group-hover:text-secondary group-hover:[&_code]:text-secondary"),children:s}),(0,i.jsx)(r.LinkBase,{href:"#"+f.current.slug,ref:f.current.ref,onClick:()=>{x?.current?.setAttribute("open","")},className:"ml-auto inline rounded-md p-1 hocus:bg-element","aria-label":"Permalink",children:(0,i.jsx)(d.B,{className:"icon-sm invisible inline-flex group-hover:visible group-focus-visible:visible"})}),(0,i.jsx)("div",{})]}),(0,i.jsx)("div",{className:(0,r.mergeClasses)("px-5 py-4","last:[&>*]:!mb-1 [&_p]:ml-0 [&_pre>pre]:mt-0"),children:l})]})})},49857:(e,s,n)=>{"use strict";n.d(s,{Z:()=>l});var i=n(37876),r=n(66028),t=n(44353),o=n(99937),a=n(77972);let l=e=>{let{prefix:s,platforms:n}=e;return n?.length?(0,i.jsxs)(o.Tk,{tag:"span",className:"inline-flex items-center",children:[s&&(0,i.jsxs)("span",{className:(0,r.mergeClasses)(t.gi,"[table_&]:!text-2xs"),children:[s," "]}),n.sort((e,s)=>e.localeCompare(s)).map(e=>(0,i.jsx)(a.A,{platform:e},e)),s&&(0,i.jsx)("br",{})]}):null}},57646:(e,s,n)=>{"use strict";n.a(e,async(e,i)=>{try{n.d(s,{r:()=>u});var r=n(37876),t=n(66028),o=n(96144),a=n(81801),l=n(44353),d=n(61958),c=n(49857),p=n(57623),h=n(99937),m=e([a]);a=(m.then?(await m)():m)[0];let u=e=>{let{children:s,properties:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.H3,{children:"Configurable properties"}),!!s&&(0,r.jsx)(h.P,{children:s}),(0,r.jsxs)(d.XI,{children:[(0,r.jsx)(d.nd,{children:(0,r.jsxs)(d.fI,{children:[(0,r.jsx)(d.A3,{children:"Name"}),(0,r.jsx)(d.A3,{children:"Default"}),(0,r.jsx)(d.A3,{children:"Description"})]})}),(0,r.jsx)("tbody",{children:n.map(e=>(0,r.jsxs)(d.fI,{children:[(0,r.jsx)(d.fh,{children:(0,r.jsx)(h.Sq,{children:e.name})}),(0,r.jsx)(d.fh,{children:e.default?(0,r.jsx)(h.Sq,{children:e.default}):"-"}),(0,r.jsxs)(d.fh,{className:"min-w-[320px]",children:[(0,r.jsxs)("div",{className:"mb-2 inline-flex empty:hidden",children:[(e.experimental||e.deprecated)&&(0,r.jsxs)("div",{className:"inline-flex flex-row flex-wrap",children:[e.deprecated&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.h,{status:"deprecated",className:"!mr-0"}),(0,r.jsx)("span",{className:(0,t.mergeClasses)(l.gi),children:" • "})]}),e.experimental&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.h,{status:"experimental",className:"!mr-0"}),(0,r.jsx)("span",{className:(0,t.mergeClasses)(l.gi),children:" • "})]})]}),!!e.platform&&(0,r.jsx)(c.Z,{prefix:"Only for:",platforms:[e.platform]})]}),(0,r.jsx)(o.oz,{components:a.u6,children:e.description})]})]},e.name))})]})]})};i()}catch(e){i(e)}})},69044:(e,s,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/permissions",function(){return n(71646)}])},71646:(e,s,n)=>{"use strict";n.a(e,async(e,i)=>{try{n.r(s),n.d(s,{__N_SSG:()=>l,default:()=>c,headings:()=>h,meta:()=>p});var r=n(37876),t=n(91668),o=n(46780),a=e([o]);o=(a.then?(await a)():a)[0];var l=!0;let p={modificationDate:"February 12, 2025",title:"Permissions",description:"Learn about configuring and adding permissions in an app config file."},h=[{depth:2,type:"text",title:"Android"},{depth:2,type:"text",title:"iOS"},{depth:2,type:"text",title:"Web"},{depth:2,type:"text",title:"Resetting permissions"}];function d(e){let s={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",kbd:"kbd",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["When developing a native app that requires access to potentially sensitive information on a user's device, such as their location or contacts, the app must request the user's permission first. For example, to access the user's media library, the app will need to run ",(0,r.jsx)(s.a,{href:"/../../../../../../../versions/latest/sdk/media-library#medialibraryrequestpermissionsasync",children:(0,r.jsx)(s.code,{children:"MediaLibrary.requestPermissionsAsync()"})}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Permissions in standalone and ",(0,r.jsx)(s.a,{href:"/../../../../../../../develop/development-builds/introduction",children:"development builds"})," require native build-time configuration before they can be requested using runtime JavaScript code. This is not required when testing projects in the ",(0,r.jsx)(s.a,{href:"https://expo.dev/go",children:"Expo Go"})," app."]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["If you don't configure or explain the native permissions properly ",(0,r.jsx)(s.strong,{children:"it may result in your app getting rejected or pulled from the stores"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"android",children:"Android"}),"\n",(0,r.jsxs)(s.p,{children:["Permissions are configured with the ",(0,r.jsx)(s.a,{href:"/../../../../../../../versions/latest/config/app/#permissions",children:(0,r.jsx)(s.code,{children:"android.permissions"})})," and ",(0,r.jsx)(s.a,{href:"/../../../../../../../versions/latest/config/app/#blockedpermissions",children:(0,r.jsx)(s.code,{children:"android.blockedPermissions"})})," keys in your ",(0,r.jsx)(s.a,{href:"/../../../../../../../workflow/configuration",children:"app config"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Most permissions are added automatically by libraries that you use in your app either with ",(0,r.jsx)(s.a,{href:"/../../../../../../../config-plugins/plugins-and-mods/#create-a-plugin",children:"config plugins"})," or with a package-level ",(0,r.jsx)(s.strong,{children:"AndroidManifest.xml"}),". You only need to use ",(0,r.jsx)(s.code,{children:"android.permissions"})," to add additional permissions that are not included by default in a library."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'@@@app.json@@@{\n  "android": {\n    "permissions": ["android.permission.SCHEDULE_EXACT_ALARM"]\n  }\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:["The only way to remove permissions that are added by package-level ",(0,r.jsx)(s.strong,{children:"AndroidManifest.xml"})," files is to block them with the ",(0,r.jsx)(s.a,{href:"/../../../../../../../versions/latest/config/app/#blockedpermissions",children:(0,r.jsx)(s.code,{children:"android.blockedPermissions"})})," property. To do this, specify the ",(0,r.jsx)(s.strong,{children:"full permission name"}),". For example, if you want to remove the audio recording permissions added by ",(0,r.jsx)(s.code,{children:"expo-av"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'@@@app.json@@@{\n  "android": {\n    "blockedPermissions": ["android.permission.RECORD_AUDIO"]\n  }\n}\n'})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["See ",(0,r.jsx)(s.a,{href:"/../../../../../../../versions/latest/config/app/#permissions",children:(0,r.jsx)(s.code,{children:"android.permissions"})})," to learn about which permissions are included in the default ",(0,r.jsx)(s.a,{href:"/../../../../../../../workflow/prebuild#templates",children:"prebuild template"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Apps using ",(0,r.jsx)(s.em,{children:"dangerous"})," or ",(0,r.jsx)(s.em,{children:"signature"})," permissions without valid reasons ",(0,r.jsx)(s.strong,{children:"may be rejected by Google"}),". Ensure you follow the ",(0,r.jsx)(s.a,{href:"https://developer.android.com/training/permissions/usage-notes",children:"Android permissions best practices"})," when submitting your app."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.a,{href:"https://developer.android.com/reference/android/Manifest.permission",children:["All available Android ",(0,r.jsx)(s.code,{children:"Manifest.permissions"})]}),"."]}),"\n"]}),"\n",(0,r.jsxs)(o.BE,{children:[(0,r.jsxs)(s.p,{children:["Modify ",(0,r.jsx)(s.strong,{children:"AndroidManifest.xml"})," to exclude specific permissions: add the ",(0,r.jsx)(s.code,{children:'tools:node="remove"'})," attribute to a ",(0,r.jsx)(s.code,{children:"<use-permission>"})," tag to ensure it is removed, even if it's included in a library's ",(0,r.jsx)(s.strong,{children:"AndroidManifest.xml"}),"."]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-xml",children:'<manifest xmlns:tools="http://schemas.android.com/tools">\n  <uses-permission tools:node="remove" android:name="android.permission.ACCESS_FINE_LOCATION" />\n</manifest>\n'})}),(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["You have to define the ",(0,r.jsx)(s.code,{children:"xmlns:tools"})," attribute on ",(0,r.jsx)(s.code,{children:"<manifest>"})," before you can use the ",(0,r.jsx)(s.code,{children:"tools:node"})," attribute on permissions."]}),"\n"]})]}),"\n",(0,r.jsx)(s.h2,{id:"ios",children:"iOS"}),"\n",(0,r.jsxs)(s.p,{children:["Your iOS app can ask for system permissions from the user. For example, to use the device's camera or access photos, Apple requires an explanation for how your app makes use of that data. Most packages will automatically provide a boilerplate reason for a given permission with ",(0,r.jsx)(s.a,{href:"/../../../../../../../config-plugins/introduction",children:"config plugins"}),". These default messages will most likely need to be tailored to your specific use case for your app to be accepted by the App Store."]}),"\n",(0,r.jsxs)(s.p,{children:["To set permission messages, use the ",(0,r.jsx)(s.a,{href:"/../../../../../../../versions/latest/config/app/#infoplist",children:(0,r.jsx)(s.code,{children:"ios.infoPlist"})})," key in your ",(0,r.jsx)(s.a,{href:"/../../../../../../../workflow/configuration",children:"app config"}),", for example:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'@@@app.json@@@{\n  "ios": {\n    "infoPlist": {\n      "NSCameraUsageDescription": "This app uses the camera to scan barcodes on event tickets."\n    }\n  }\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Many of these properties are also directly configurable using the ",(0,r.jsx)(s.a,{href:"/../../../../../../../config-plugins/introduction",children:"config plugin"})," properties associated with the library that adds them. For example, with ",(0,r.jsx)(s.a,{href:"/../../../../../../../versions/latest/sdk/media-library",children:(0,r.jsx)(s.code,{children:"expo-media-library"})})," you can configure photo permission messages like this:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'@@@app.json@@@{\n  "plugins": [\n    [\n      "expo-media-library",\n      {\n        "photosPermission": "Allow $(PRODUCT_NAME) to access your photos.",\n        "savePhotosPermission": "Allow $(PRODUCT_NAME) to save photos."\n      }\n    ]\n  ]\n}\n'})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Changes to the ",(0,r.jsx)(s.strong,{children:"Info.plist"})," cannot be updated over-the-air, they will only be deployed when you submit a new native binary. For example, with ",(0,r.jsx)(s.a,{href:"/../../../../../../../build/introduction",children:(0,r.jsx)(s.code,{children:"eas build"})}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Apple's official ",(0,r.jsx)(s.a,{href:"https://developer.apple.com/design/human-interface-guidelines/privacy#Requesting-permission",children:"permission message recommendations"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.a,{href:"https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html",children:["All available ",(0,r.jsx)(s.strong,{children:"Info.plist"})," properties"]}),"."]}),"\n"]}),"\n",(0,r.jsx)(o.BE,{children:(0,r.jsxs)(s.p,{children:["Add and modify the permission message values in ",(0,r.jsx)(s.strong,{children:"Info.plist"})," file directly. We recommend doing this directly in Xcode for autocompletion."]})}),"\n",(0,r.jsx)(s.h2,{id:"web",children:"Web"}),"\n",(0,r.jsxs)(s.p,{children:["On the web, permissions like the ",(0,r.jsx)(s.code,{children:"Camera"})," and ",(0,r.jsx)(s.code,{children:"Location"})," can only be requested from a ",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts#When_is_a_context_considered_secure",children:"secure context"}),". For example, using ",(0,r.jsx)(s.code,{children:"https://"})," or ",(0,r.jsx)(s.code,{children:"http://localhost"}),". This limitation is similar to Android's manifest permissions and iOS's ",(0,r.jsx)(s.strong,{children:"Info.plist"})," usage messages and is enforced to increase privacy."]}),"\n",(0,r.jsx)(s.h2,{id:"resetting-permissions",children:"Resetting permissions"}),"\n",(0,r.jsx)(s.p,{children:"Often you want to be able to test what happens when a user rejects permissions, to ensure your app reacts gracefully. An operating-system level restriction on both Android and iOS prohibits an app from asking for the same permission more than once (you can imagine how this could be annoying for the user to be repeatedly prompted for permissions after rejecting them). To test different flows involving permissions in development, you may need to uninstall and reinstall the native app."}),"\n",(0,r.jsxs)(s.p,{children:["When testing in ",(0,r.jsx)(s.a,{href:"https://expo.dev/go",children:"Expo Go"}),", you can delete the app and reinstall it by running ",(0,r.jsx)(s.code,{children:"npx expo start"})," and pressing ",(0,r.jsx)(s.kbd,{children:"i"})," or ",(0,r.jsx)(s.kbd,{children:"a"})," in the ",(0,r.jsx)(s.a,{href:"/../../../../../../../more/expo-cli",children:"Expo CLI"})," Terminal UI."]})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}i()}catch(e){i(e)}})},96665:(e,s,n)=>{"use strict";n.d(s,{Y:()=>o});var i=n(37876),r=n(14232),t=n(99937);let o=e=>{let{children:s}=e;return(0,r.useEffect)(()=>{if("string"==typeof s)throw Error(`Content inside 'ConfigPluginExample' needs to be surrounded by new lines to be parsed as markdown.

Make sure there is a blank new line before and after this content: '${s}'`)},[s]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.H3,{children:"Example app.json with config plugin"}),s]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[96144,81801,90636,46593,38792],()=>s(69044)),_N_E=e.O()}]);
